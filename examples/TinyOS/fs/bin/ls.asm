.define DIRECTORYS_END @R14
.define FILES_END @R13
.define INDEX @R12
.define FILES @R11
.define DIRECTORYS @R10
.define PATH @R9

; Get the file/directory count
SYSCALL @GET_CURRENT_DIRECTORY
MOV @R9 @R15

MOV @R15 @R9
SYSCALL @LIST_FILES

; Files
LD @R11 @FILES_START
LDI @FILES_END @FILES_START
ADD @FILES_END @R11
INC @FILES_END

; Directorys
LD @R10 @DIRECTORYS_START
LDI @DIRECTORYS_END @DIRECTORYS_START
ADD @DIRECTORYS_END @R10
INC @DIRECTORYS_END

; Loop through the files
LDI @R12 @FILES_START
INC @R12

:FILES_LOOP
    CMP @R12 @FILES_END
    JZ @FILES_LOOP_END

    LDP @R0 @R12
    LDI @R15 'File:      '
    CON @R15 @R0
    SYSCALL @PRINT_STRING

    INC @R12
    JMP @FILES_LOOP

:FILES_LOOP_END

; Loop through the directorys
LDI @R12 @DIRECTORYS_START
INC @R12

:DIRECTORYS_LOOP
    CMP @R12 @DIRECTORYS_END
    JZ @DIRECTORYS_LOOP_END

    LDP @R0 @R12
    LDI @R15 'Directory: '
    CON @R15 @R0
    SYSCALL @PRINT_STRING

    INC @R12
    JMP @DIRECTORYS_LOOP

:DIRECTORYS_LOOP_END

HLT